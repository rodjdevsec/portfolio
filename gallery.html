<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rogel's Gallery</title>
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='25' fill='%23000000'/><text x='50%25' y='55%25' dominant-baseline='middle' text-anchor='middle' fill='%23FFFFFF' font-family='Arial, sans-serif' font-weight='900' font-size='60'>R</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap');

        .slide-content {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease, transform 0.8s ease-out;
        }

        .slide-content.active {
            opacity: 1;
            transform: translateY(0);
        }

        #calibrate-btn {
            position: fixed;
            bottom: 30px;
            left: 24px;
            z-index: 100;
            display: none;
            color: rgba(255, 255, 255, 0.4);
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 2px;
            cursor: pointer;
            transition: opacity 0.3s ease;
        }

        @media (max-width: 768px) {
            #calibrate-btn {
                display: block;
            }

            #calibrate-btn:active {
                opacity: 0.5;
            }
        }
    </style>
</head>

<body class="bg-black text-white font-['Inter'] m-0 p-0 w-full h-full overflow-hidden">



    <nav
        class="fixed top-0 left-0 w-full z-[90] flex justify-between items-center px-6 py-6 md:px-12 md:py-8 pointer-events-none">
        <div></div>

        <a href="about"
            class="pointer-events-auto group flex items-center gap-2 text-[10px] font-bold uppercase tracking-[0.3em] text-white/50 hover:text-white transition-colors">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
                stroke-linecap="round" stroke-linejoin="round" class="group-hover:-translate-x-1 transition-transform">
                <path d="M19 12H5"></path>
                <path d="M12 19l-7-7 7-7"></path>
            </svg>
            Back
        </a>
    </nav>

    <div id="canvas-container" class="fixed top-0 left-0 w-full h-full z-[1]"></div>

    <div id="ui-layer" class="fixed top-0 left-0 w-full h-full z-[2] pointer-events-none">

        <div class="slide-content absolute pointer-events-auto w-[90%] md:w-[30%] md:max-w-[450px] left-[5%] md:left-[8%] bottom-[10%] md:bottom-auto md:top-[35%] flex flex-col items-start md:items-start text-left md:text-left"
            id="slide-0">
            <span
                class="text-[0.7rem] uppercase tracking-[3px] text-[#666] mb-6 inline-block border-b border-[#333] pb-[5px]">01
                / CC</span>
            <div
                class="font-['Inter'] text-[0.85rem] md:text-[0.9rem] font-light leading-[1.6] md:leading-[1.8] text-[#888] mb-8 md:mb-12 text-left md:text-justify tracking-wide">
                Captured this moment right after we reconciled from a difficult time. It was her first time visiting
                museums again, making the experience even more meaningful.
            </div>
            <div
                class="grid grid-cols-2 md:grid-cols-[80px_1fr] gap-2 md:gap-y-[0.8rem] border-t border-[#333] pt-4 md:pt-[1.5rem] w-full">
                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Location</span>
                <span class="text-[0.9rem] font-medium text-white text-left">National Museum, Manila</span>

                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Date</span>
                <span class="text-[0.9rem] font-medium text-white text-left">Jan 2026</span>

                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Device</span>
                <span class="text-[0.9rem] font-medium text-white text-left">iPhone 14 Pro Max</span>
            </div>
        </div>

        <div class="slide-content absolute pointer-events-auto w-[90%] md:w-[30%] md:max-w-[450px] left-[5%] md:left-[8%] bottom-[10%] md:bottom-auto md:top-[35%] flex flex-col items-start md:items-start text-left md:text-left"
            id="slide-1">
            <span
                class="text-[0.7rem] uppercase tracking-[3px] text-[#666] mb-6 inline-block border-b border-[#333] pb-[5px]">02
                / Golf</span>
            <div
                class="font-['Inter'] text-[0.85rem] md:text-[0.9rem] font-light leading-[1.6] md:leading-[1.8] text-[#888] mb-8 md:mb-12 text-left md:text-justify tracking-wide">
                A serene view of the historic golf course situated right across the National Museum. The lush greenery
                offers a stark, peaceful contrast to the bustling city streets of Manila.
            </div>
            <div
                class="grid grid-cols-2 md:grid-cols-[80px_1fr] gap-2 md:gap-y-[0.8rem] border-t border-[#333] pt-4 md:pt-[1.5rem] w-full">
                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Location</span>
                <span class="text-[0.9rem] font-medium text-white text-left">Manila</span>

                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Date</span>
                <span class="text-[0.9rem] font-medium text-white text-left">Jan 2026</span>

                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Device</span>
                <span class="text-[0.9rem] font-medium text-white text-left">iPhone 14 Pro Max</span>
            </div>
        </div>

        <div class="slide-content absolute pointer-events-auto w-[90%] md:w-[30%] md:max-w-[450px] left-[5%] md:left-[8%] bottom-[10%] md:bottom-auto md:top-[35%] flex flex-col items-start md:items-start text-left md:text-left"
            id="slide-2">
            <span
                class="text-[0.7rem] uppercase tracking-[3px] text-[#666] mb-6 inline-block border-b border-[#333] pb-[5px]">03
                / Intramuros</span>
            <div
                class="font-['Inter'] text-[0.85rem] md:text-[0.9rem] font-light leading-[1.6] md:leading-[1.8] text-[#888] mb-8 md:mb-12 text-left md:text-justify tracking-wide">
                The iconic archway welcoming visitors into the Walled City. This historic gate stands as a timeless
                portal to Manila's rich colonial past, marked by the 'Intramuros' sign atop the stone structure.
            </div>
            <div
                class="grid grid-cols-2 md:grid-cols-[80px_1fr] gap-2 md:gap-y-[0.8rem] border-t border-[#333] pt-4 md:pt-[1.5rem] w-full">
                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Location</span>
                <span class="text-[0.9rem] font-medium text-white text-left">Intramuros, Manila</span>

                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Date</span>
                <span class="text-[0.9rem] font-medium text-white text-left">Jan 2026</span>

                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Device</span>
                <span class="text-[0.9rem] font-medium text-white text-left">iPhone 14 Pro Max</span>
            </div>
        </div>

        <div class="slide-content absolute pointer-events-auto w-[90%] md:w-[30%] md:max-w-[450px] left-[5%] md:left-[8%] bottom-[10%] md:bottom-auto md:top-[35%] flex flex-col items-start md:items-start text-left md:text-left"
            id="slide-3">
            <span
                class="text-[0.7rem] uppercase tracking-[3px] text-[#666] mb-6 inline-block border-b border-[#333] pb-[5px]">04
                / Natural History</span>
            <div
                class="font-['Inter'] text-[0.85rem] md:text-[0.9rem] font-light leading-[1.6] md:leading-[1.8] text-[#888] mb-8 md:mb-12 text-left md:text-justify tracking-wide">
                The majestic facade of the National Museum of Natural History. Its neoclassical architecture stands
                proudly, housing the country's rich biological and geological diversity within its renovated halls.
            </div>
            <div
                class="grid grid-cols-2 md:grid-cols-[80px_1fr] gap-2 md:gap-y-[0.8rem] border-t border-[#333] pt-4 md:pt-[1.5rem] w-full">
                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Location</span>
                <span class="text-[0.9rem] font-medium text-white text-left">National Museum of Natural History</span>

                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Date</span>
                <span class="text-[0.9rem] font-medium text-white text-left">Jan 2026</span>

                <span
                    class="text-[0.6rem] uppercase tracking-[2px] text-[#555] self-center text-left md:text-left pr-4 md:pr-0">Device</span>
                <span class="text-[0.9rem] font-medium text-white text-left">iPhone 14 Pro Max</span>
            </div>
        </div>

    </div>

    <div
        class="scroll-hint fixed bottom-5 md:bottom-10 left-0 md:left-[50px] w-full md:w-auto text-center md:text-left text-[0.7rem] uppercase tracking-[2px] text-[#aaa]">
        Scroll to explore</div>

    <button id="calibrate-btn" aria-label="Recalibrate Center">
        <span>Recalibrate</span>
    </button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        let isMobile = window.innerWidth <= 768;
        let CONFIG = {};
        let totalGalleryWidth = 0;
        let paintingGroups = [];
        let galleryGroup = null;
        let camera = null;



        function updateConfig() {
            isMobile = window.innerWidth <= 768;
            CONFIG = {
                slideCount: 4,
                spacingX: isMobile ? 35 : 45,
                pWidth: isMobile ? 12 : 14,
                pHeight: isMobile ? 15 : 18,
                camZ: isMobile ? 38 : 30,
                wallAngleY: isMobile ? 0 : -0.25,
                snapDelay: 200,
                lerpSpeed: 0.06
            };
            totalGalleryWidth = CONFIG.slideCount * CONFIG.spacingX;

            if (galleryGroup) {
                galleryGroup.rotation.y = CONFIG.wallAngleY;
                galleryGroup.position.x = isMobile ? 0 : 8;
                galleryGroup.position.y = isMobile ? 6 : 0;

                paintingGroups.forEach((group, i) => {
                    group.position.x = i * CONFIG.spacingX;
                });
            }

            if (camera) {
                camera.position.z = CONFIG.camZ;
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
            }
        }

        updateConfig();

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000000);
        scene.fog = new THREE.Fog(0x000000, 10, 110);

        camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, CONFIG.camZ);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const ambient = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambient);

        const dirLight = new THREE.DirectionalLight(0xffffff, 0.5);
        dirLight.position.set(10, 20, 10);
        scene.add(dirLight);

        galleryGroup = new THREE.Group();
        scene.add(galleryGroup);

        updateConfig();

        const textureLoader = new THREE.TextureLoader();
        const planeGeo = new THREE.PlaneGeometry(CONFIG.pWidth, CONFIG.pHeight);

        const images = [
            'assets/gallery/cc.JPG',
            'assets/gallery/golf.JPG',
            'assets/gallery/intra.JPG',
            'assets/gallery/museum.JPG'
        ];



        for (let i = 0; i < CONFIG.slideCount; i++) {
            const group = new THREE.Group();
            group.position.set(i * CONFIG.spacingX, 0, 0);
            const mat = new THREE.MeshBasicMaterial({ map: textureLoader.load(images[i]) });
            const mesh = new THREE.Mesh(planeGeo, mat);
            const edges = new THREE.EdgesGeometry(planeGeo);
            const outline = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ color: 0x444444 }));

            const shadowGeo = new THREE.PlaneGeometry(CONFIG.pWidth, CONFIG.pHeight);
            const shadowMat = new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.05 });
            const shadow = new THREE.Mesh(shadowGeo, shadowMat);
            shadow.position.set(0.8, -0.8, -0.5);

            const lineZ = -1;
            const lineLen = CONFIG.spacingX;
            const lineGeo = new THREE.BufferGeometry().setFromPoints([
                new THREE.Vector3(-lineLen / 2, 14, lineZ), new THREE.Vector3(lineLen / 2, 14, lineZ),
                new THREE.Vector3(-lineLen / 2, -14, lineZ), new THREE.Vector3(lineLen / 2, -14, lineZ)
            ]);
            const lines = new THREE.LineSegments(lineGeo, new THREE.LineBasicMaterial({ color: 0x333333 }));

            group.add(shadow);
            group.add(mesh);
            group.add(outline);
            group.add(lines);

            galleryGroup.add(group);
            paintingGroups.push(group);
        }

        galleryGroup.rotation.y = CONFIG.wallAngleY;
        galleryGroup.position.x = isMobile ? 0 : 8;
        galleryGroup.position.y = isMobile ? 6 : 0;

        let currentScroll = 0;
        let targetScroll = 0;
        let snapTimer = null;
        let mouse = { x: 0, y: 0 };

        function snapToNearest() {
            const index = Math.round(targetScroll / CONFIG.spacingX);
            targetScroll = index * CONFIG.spacingX;
        }

        window.addEventListener('wheel', (e) => {
            targetScroll += e.deltaY * 0.1;
            if (snapTimer) clearTimeout(snapTimer);
            snapTimer = setTimeout(snapToNearest, CONFIG.snapDelay);
        });

        let touchStart = 0;
        window.addEventListener('touchstart', e => {
            touchStart = e.touches[0].clientX;
            if (snapTimer) clearTimeout(snapTimer);
        });

        window.addEventListener('touchmove', e => {
            const diff = touchStart - e.touches[0].clientX;
            targetScroll += diff * 0.6;
            touchStart = e.touches[0].clientX;
            if (snapTimer) clearTimeout(snapTimer);
        });

        window.addEventListener('touchend', () => {
            snapToNearest();
        });

        window.addEventListener('mousemove', (e) => {
            mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
        });

        let initialOrientation = null;

        function calibrate(e) {
            if (e) e.stopPropagation();
            initialOrientation = null;
        }

        document.getElementById('calibrate-btn').addEventListener('click', calibrate);
        document.getElementById('calibrate-btn').addEventListener('touchstart', calibrate);



        function handleOrientation(event) {
            if (event.gamma === null || event.beta === null) return;

            if (!initialOrientation) {
                initialOrientation = {
                    gamma: event.gamma,
                    beta: event.beta
                };
                return;
            }

            let gammaDelta = event.gamma - initialOrientation.gamma;
            let betaDelta = event.beta - initialOrientation.beta;

            let x = gammaDelta / 20;
            let y = betaDelta / 20;

            mouse.x = Math.max(-2, Math.min(2, x));
            mouse.y = Math.max(-2, Math.min(2, y));
        }

        function startExperience() {
            if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission()
                    .then(response => {
                        if (response === 'granted') {
                            window.addEventListener('deviceorientation', handleOrientation);
                        }
                    })
                    .catch(console.error);
            } else {
                window.addEventListener('deviceorientation', handleOrientation);
                window.addEventListener('deviceorientationabsolute', handleOrientation);
            }

            window.removeEventListener('click', startExperience);
            window.removeEventListener('touchstart', startExperience);
        }

        window.addEventListener('click', startExperience);
        window.addEventListener('touchstart', startExperience);

        function updateUI(scrollX) {
            const rawIndex = Math.round(scrollX / CONFIG.spacingX);
            const safeIndex = ((rawIndex % CONFIG.slideCount) + CONFIG.slideCount) % CONFIG.slideCount;
            for (let i = 0; i < CONFIG.slideCount; i++) {
                const el = document.getElementById(`slide-${i}`);
                if (el) {
                    if (i === safeIndex) el.classList.add('active');
                    else el.classList.remove('active');
                }
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            currentScroll += (targetScroll - currentScroll) * CONFIG.lerpSpeed;
            const xMove = currentScroll * Math.cos(CONFIG.wallAngleY);
            const zMove = currentScroll * Math.sin(CONFIG.wallAngleY);
            camera.position.x = xMove;
            camera.position.z = CONFIG.camZ - zMove;
            paintingGroups.forEach((group, i) => {
                const originalX = i * CONFIG.spacingX;
                const distFromCam = currentScroll - originalX;
                const shift = Math.round(distFromCam / totalGalleryWidth) * totalGalleryWidth;
                group.position.x = originalX + shift;
            });

            const rotationIntensity = isMobile ? 0.2 : 0.05;
            camera.rotation.x = -mouse.y * rotationIntensity;
            camera.rotation.y = mouse.x * rotationIntensity;

            updateUI(currentScroll);
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            updateConfig();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();

    </script>
</body>

</html>